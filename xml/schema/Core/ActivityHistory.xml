<?xml version="1.0" encoding="iso-8859-1" ?>

<table>
  <base>CRM/Core</base>
  <class>ActivityHistory</class>
  <name>civicrm_activity_history</name>
  <comment>Record history for an entity in the crm module</comment>
  <add>1.1</add>
  <drop>2.0</drop>
  <field>
      <name>id</name>
      <type>int unsigned</type>
      <required>true</required>
      <comment>table record id</comment>
       <add>1.1</add>
  </field>
  <primaryKey>
      <name>id</name>
      <autoincrement>true</autoincrement>
  </primaryKey>
  <field>
      <name>entity_table</name>
      <type>varchar</type>
      <length>64</length>
      <comment>physical tablename for entity whose activity history is tracked, e.g. civicrm_contact</comment>
       <add>1.1</add>
  </field>
  <field>
      <name>entity_id</name>
      <title>Contact ID (match to contact)</title>
      <import>true</import>
      <type>int unsigned</type>
      <headerPattern>/contact(.?id)?/i</headerPattern>
      <dataPattern>/^\d+$/</dataPattern>
      <required>true</required>
      <comment>FK to entity table specified in entity_table column</comment>
       <add>1.1</add>
  </field>
  <index>
       <name>index_entity</name>
       <fieldName>entity_table</fieldName>
       <fieldName>entity_id</fieldName>
       <add>1.1</add>
  </index>
  <field>
      <name>activity_type</name>
      <title>Activity Type</title>
      <import>true</import>
      <headerPattern>/activity type/i</headerPattern>
      <type>varchar</type>
      <length>64</length>
      <comment>sortable label for this activity assigned be registering module or user (e.g. Phone Call)</comment>
       <add>1.1</add>
  </field>
  <field>
      <name>module</name>
      <title>Module</title>
      <import>true</import>
      <headerPattern>/module/i</headerPattern>
      <type>varchar</type>
      <length>64</length>
      <comment>Display name of module which registered this activity</comment>
       <add>1.1</add>
  </field>
  <field>
      <name>callback</name>
      <title>Callback Method</title>
      <import>true</import>
      <headerPattern>/callback|method/i</headerPattern>
      <type>varchar</type>
      <length>64</length>
      <comment>Function to call which will return URL for viewing details</comment>
       <add>1.1</add>
  </field>
  <field>
      <name>activity_id</name>
      <title>Activity ID</title> 
      <import>true</import>
      <headerPattern>/actvity(.?id)?/i</headerPattern>
      <dataPattern>/^\d+$/</dataPattern>
      <type>int unsigned</type>
      <required>true</required>
      <comment>FK to details item - passed to callback</comment>
       <add>1.1</add>
  </field>
  <index>
       <name>index_activity</name>
       <fieldName>activity_id</fieldName>
       <add>1.6</add>
  </index>
  <field>
       <name>activity_summary</name>
       <title>Activity Summary</title>
       <import>true</import>
       <headerPattern>/activity summary/i</headerPattern>
       <type>varchar</type>
       <length>255</length>
       <comment>brief description of activity for summary display - as populated by registering module</comment>
       <add>1.1</add>
  </field>
  <field>
       <name>activity_date</name>
       <title>Activity Date</title>
       <import>true</import>
       <type>datetime</type>
       <headerPattern>/activity date/i</headerPattern>
       <default>0</default>
       <comment>when did this activity occur</comment>
       <add>1.1</add>
  </field>
  <field>
       <name>relationship_id</name>
       <type>int unsigned</type>
       <comment>OPTIONAL FK to civicrm_relationship.id. Which relationship (of this contact) potentially triggered this activity, i.e. he donated because he was a Board Member of Org X / Employee of Org Y</comment>
       <add>1.1</add>
  </field>
  <foreignKey>
       <name>relationship_id</name>
       <table>civicrm_relationship</table>
       <key>id</key>
       <add>1.1</add>
  </foreignKey>
  <field>
       <name>group_id</name>
       <type>int unsigned</type>
       <comment>OPTIONAL FK to civicrm_group.id. Was this part of a group communication that triggered this activity?</comment>
       <add>1.1</add>
  </field>
  <foreignKey>
       <name>group_id</name>
       <table>civicrm_group</table>
       <key>id</key>
       <add>1.1</add>
  </foreignKey>
  <field>     
      <name>is_test</name>  
      <title>Test</title>
      <type>boolean</type>
      <default>0</default>
      <import>true</import>
  </field>
</table>
