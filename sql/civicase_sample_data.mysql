-- /*******************************************************
-- *
-- * Sample Data for CiviCase Component  
-- *
-- *******************************************************/

-- Enable Case Tab in Site Preferences
UPDATE civicrm_preferences SET `contact_view_options`= '123456789101113';

-- /*******************************************************
-- *
-- * Case Types  
-- *
-- *******************************************************/
SELECT @option_group_id_case_type        := max(id) from civicrm_option_group where name = 'case_type';

-- get rid of HRD-related sample case types
DELETE FROM `civicrm_option_value` WHERE option_group_id = @option_group_id_case_type;

INSERT INTO 
   `civicrm_option_value` (`option_group_id`, `label`, `value`, `name`, `grouping`, `filter`, `is_default`, `weight`, `description`, `is_optgroup`, `is_reserved`, `is_active`) 
VALUES
(@option_group_id_case_type, 'Substance Abuse',  1, 'substance_abuse', NULL, 0,  0, 1, 'Substance abuse case', 0, 0, 1),
(@option_group_id_case_type, 'STD Claim',  2, 'std_claim', NULL, 0,  0, 2, 'Short term disability claim case', 0, 0, 1);


-- /*******************************************************
-- *
-- * Activity Categories and Activity Types  
-- *
-- *******************************************************/
INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Case History', 1, 'Case history', 1, 0, NULL, 7);
SELECT @parentId        := max(id) from civicrm_category where label = 'Case History';
INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Open Case', 1, '', 1, 0, @parentId, 7),
    VALUES ('Presenting Problem', 2, '', 1, 0, @parentId, 7),
    VALUES ('Type of Service', 3, '', 1, 0, @parentId, 7),
    VALUES ('Inbound Referral Source', 4, '', 1, 0, @parentId, 7),
    VALUES ('Regulatory Involvement', 5, '', 1, 0, @parentId, 7),
    VALUES ('Outbound Referral', 6, '', 1, 0, @parentId, 7),
    VALUES ('Close Case', 7, '', 1, 0, @parentId, 7);

INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Medications and Substance Use', 2, 'Medications and substance use', 1, 1, NULL, 7);
SELECT @parentId        := max(id) from civicrm_category where label = 'Medications and Substance Use';
INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Medication and Drug Use', 1, '', 1, 0, @parentId, 7);


INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Personal History', 3, 'Personal history', 1, 1, NULL, 7);
SELECT @parentId        := max(id) from civicrm_category where label = 'Personal History';
INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Last Contact with MD', 1, '', 1, 0, @parentId, 7),
    VALUES ('Self-rated Health Status', 2, '', 1, 0, @parentId, 7),
    VALUES ('Current Home Situation', 3, '', 1, 0, @parentId, 7),
    VALUES ('Current Spiritual Practice', 4, '', 1, 0, @parentId, 7),
    VALUES ('Regular Physical Activity', 5, '', 1, 0, @parentId, 7);


INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Occupational History', 4, 'Occupational history', 1, 1, NULL, 7);
SELECT @parentId        := max(id) from civicrm_category where label = 'Occupational History';
INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Current Work Status', 1, '', 1, 0, @parentId, 7),
    VALUES ('Current Prescribing Privileges', 2, '', 1, 0, @parentId, 7),
    VALUES ('Current MAIN Practice Setting', 3, '', 1, 0, @parentId, 7),
    VALUES ('Current MAIN Practice Activity', 4, '', 1, 0, @parentId, 7),
    VALUES ('Currently Weekly Work Hours', 5, '', 1, 0, @parentId, 7);

INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Educational History', 5, 'Educational history', 1, 1, NULL, 7);
SELECT @parentId        := max(id) from civicrm_category where label = 'Educational History';
INSERT INTO `civicrm_category` (`label`, `weight`, `description`, `is_active`, `is_reserved`, `parent_id`, `component_id`)
    VALUES ('Professional School', 1, '', 1, 0, @parentId, 7),
    VALUES ('Residency Training', 2, '', 1, 0, @parentId, 7),
    VALUES ('Other Degrees and Certifications', 3, '', 1, 0, @parentId, 7);


-- /*******************************************************
-- *
-- * Relationship Types
-- *
-- *******************************************************/
INSERT INTO civicrm_relationship_type( name_a_b, name_b_a, description, contact_type_a, contact_type_b, is_reserved )
    VALUES( 'Client', 'Case Coordinator', 'Case Coordinator', 'Individual', 'Individual', 0 );
SELECT @cR            := max(id) from civicrm_relationship_type where name_b_a = 'Case Coordinator';

INSERT INTO civicrm_relationship_type( name_a_b, name_b_a, description, contact_type_a, contact_type_b, is_reserved )
    VALUES( 'Client', 'Addiction Counselor', 'Addiction Counselor', 'Individual', 'Individual', 0 );
SELECT @aR            := max(id) from civicrm_relationship_type where name_b_a = 'Addiction Counselor';

INSERT INTO civicrm_relationship_type( name_a_b, name_b_a, description, contact_type_a, contact_type_b, is_reserved )
    VALUES( 'Client', 'Supervisor', 'Immediate workplace supervisor', 'Individual', 'Individual', 0 );
SELECT @sR            := max(id) from civicrm_relationship_type where name_b_a = 'Supervisor';


-- /*******************************************************
-- *
-- * Clients and Cases  
-- *
-- *******************************************************/
INSERT INTO `civicrm_contact` (`contact_type`, `contact_sub_type`, `do_not_email`, `do_not_phone`, `do_not_mail`, `do_not_trade`, `is_opt_out`, `legal_identifier`, `external_identifier`, `sort_name`, `display_name`, `nick_name`, `legal_name`, `home_URL`, `image_URL`, `preferred_communication_method`, `preferred_mail_format`, `hash`, `source`, `first_name`, `middle_name`, `last_name`, `prefix_id`, `suffix_id`, `greeting_type`, `custom_greeting`, `job_title`, `gender_id`, `birth_date`)
    VALUES ('Individual', NULL, 1, 0, 0, 0, 0, NULL, NULL, 'Reynolds, Jason', 'Dr Jason G Reynolds', NULL, NULL, NULL, NULL, '3', 'Both', '-1141133189', NULL, 'Jason', 'G', 'Reynolds', 4, NULL, 'Custom', NULL, NULL, 2, '1951-08-30');
    VALUES ('Individual', NULL, 1, 0, 0, 0, 0, NULL, NULL, 'Jackson, Janet', 'Dr Janet A Jackson', NULL, NULL, NULL, NULL, '3', 'Both', '-1141133155', NULL, 'Janet', 'A', 'Jackson', 4, NULL, 'Custom', NULL, NULL, 1, '1959-07-11');
    VALUES ('Individual', NULL, 1, 0, 0, 0, 0, NULL, NULL, 'Parker, Peter', 'Dr Peter J Parker', NULL, NULL, NULL, NULL, '3', 'Both', '-1141133114', NULL, 'Peter', 'James', 'Parker', 4, NULL, 'Custom', NULL, NULL, 2, '1969-03-12');

SELECT @clientId1        := max(id) from civicrm_contact where sort_name = 'Reynolds, Jason';
INSERT INTO `civicrm_case` (`case_type_id`, `subject`, `start_date`, `end_date`, `details`, `status_id`)
    VALUES ('1', 'Possible morphine addiction', '2008-10-01', NULL, 'Based on initial call, client is dealing with possible severe morphine addiction.', 1);
SELECT @caseId1        := max(id) from civicrm_case;
INSERT INTO `civicrm_case_contact` (`case_id`, `contact_id`)
    VALUES (@caseId1, @clientId1);

SELECT @clientId2        := max(id) from civicrm_contact where sort_name = 'Jackson, Janet';
INSERT INTO `civicrm_case` (`case_type_id`, `subject`, `start_date`, `end_date`, `details`, `status_id`)
    VALUES ('1', 'Moderate to severe cocaine abuse', '2008-10-08', NULL, 'Based on initial call, client is dealing with moderate or severe cocaine abuse leading to work interruptions.', 1);
SELECT @caseId2        := max(id) from civicrm_case;
INSERT INTO `civicrm_case_contact` (`case_id`, `contact_id`)
    VALUES (@caseId2, @clientId2);

SELECT @clientId3        := max(id) from civicrm_contact where sort_name = 'Parker, Peter';
INSERT INTO `civicrm_case` (`case_type_id`, `subject`, `start_date`, `end_date`, `details`, `status_id`)
    VALUES ('1', 'Testosterone abuse leading to emotional instability', '2008-10-11', NULL, 'Based on initial call, client is using large does of testosterone resulting in anger management problems at work.', 1);
SELECT @caseId3        := max(id) from civicrm_case;
INSERT INTO `civicrm_case_contact` (`case_id`, `contact_id`)
    VALUES (@caseId3, @clientId3);



-- /*******************************************************
-- *
-- * Service Providers and Case Roles (relationships)  
-- *
-- *******************************************************/
INSERT INTO `civicrm_contact` (`contact_type`, `contact_sub_type`, `do_not_email`, `do_not_phone`, `do_not_mail`, `do_not_trade`, `is_opt_out`, `legal_identifier`, `external_identifier`, `sort_name`, `display_name`, `nick_name`, `legal_name`, `home_URL`, `image_URL`, `preferred_communication_method`, `preferred_mail_format`, `hash`, `source`, `first_name`, `middle_name`, `last_name`, `prefix_id`, `suffix_id`, `greeting_type`, `custom_greeting`, `job_title`, `gender_id`, `birth_date`)
    VALUES ('Individual', NULL, 1, 0, 0, 0, 0, NULL, NULL, 'Green, Susan', 'Dr Susan Green', NULL, NULL, NULL, NULL, '3', 'Both', '-1141133190', NULL, 'Susan', NULL, 'Green', 4, NULL, 'Custom', NULL, NULL, 1, '1959-06-30');
    VALUES ('Individual', NULL, 1, 0, 0, 0, 0, NULL, NULL, 'Burke, Alice', 'Alice Burke', NULL, NULL, NULL, NULL, '3', 'Both', '-1141133124', NULL, 'Alice', NULL, 'Burke', NULL, NULL, 'Custom', NULL, NULL, 1, '1966-02-19');
    VALUES ('Individual', NULL, 1, 0, 0, 0, 0, NULL, NULL, 'Dempsey, Stuart', 'Dr Stuart Dempsey', NULL, NULL, NULL, NULL, '3', 'Both', '-1141133181', NULL, 'Stuart', 'Albert', 'Dempsey', 4, NULL, 'Custom', NULL, NULL, 2, '1968-05-12');

SELECT @provId1        := max(id) from civicrm_contact where sort_name = 'Green, Susan';
INSERT INTO `civicrm_relationship` (`contact_id_a`, `contact_id_b`, `relationship_type_id`, `start_date`, `end_date`, `is_active`, `description`, `is_permission_a_b`, `is_permission_b_a`, `case_id`)
    VALUES (@clientId1, @provId1, @cR, '2008-10-01', NULL, 1, NULL, 0, 0, @caseId1),
    VALUES (@clientId2, @provId1, @cR, '2008-10-08', NULL, 1, NULL, 0, 0, @caseId2),
    VALUES (@clientId3, @provId1, @cR, '2008-10-11', NULL, 1, NULL, 0, 0, @caseId3);

SELECT @provId2        := max(id) from civicrm_contact where sort_name = 'Burke, Alice';
INSERT INTO `civicrm_relationship` (`contact_id_a`, `contact_id_b`, `relationship_type_id`, `start_date`, `end_date`, `is_active`, `description`, `is_permission_a_b`, `is_permission_b_a`, `case_id`)
    VALUES (@clientId1, @provId2, @aR, '2008-10-01', NULL, 1, NULL, 0, 0, @caseId1),
    VALUES (@clientId2, @provId2, @aR, '2008-10-08', NULL, 1, NULL, 0, 0, @caseId2),
    VALUES (@clientId3, @provId2, @aR, '2008-10-11', NULL, 1, NULL, 0, 0, @caseId3);

SELECT @provId3        := max(id) from civicrm_contact where sort_name = 'Dempsey, Stuart';
INSERT INTO `civicrm_relationship` (`contact_id_a`, `contact_id_b`, `relationship_type_id`, `start_date`, `end_date`, `is_active`, `description`, `is_permission_a_b`, `is_permission_b_a`, `case_id`)
    VALUES (@clientId3, @provId3, @sR, '2007-04-01', NULL, 1, NULL, 0, 0, @caseId3);


-- /*******************************************************
-- *
-- * Case Activities  
-- *
-- *******************************************************/
INSERT INTO `civicrm_case_activity` (`id`, `case_id`, `activity_id`) VALUES (1, 1, 544);
INSERT INTO `civicrm_activity_target` (`id`, `activity_id`, `target_contact_id`) VALUES (451, 544, 103);
