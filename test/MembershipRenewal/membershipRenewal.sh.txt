#!/bin/sh

#####################################
# Populating Sample Data for testing
#####################################

# define your database name here, will be overriden by 
# FIRST command line argument if given
DBNAME=
# define your database usernamename here, will be overriden by 
# SECOND command line argument if given
DBUSER=
# define your database password here, will be overriden by 
# THIRD command line argument if given
DBPASS=

# set your PHP5 bin dir path here.
# The path should be terminated with dir separator!
PHP5PATH=

# Current dir
ORIGPWD=`pwd`

cd $ORIGPWD/../../sql

echo; echo Dropping $DBNAME database
mysqladmin -f -u$DBUSER -p$DBPASS drop $DBNAME
echo; echo Creating $DBNAME database
mysqladmin -f -u$DBUSER -p$DBPASS create $DBNAME
echo; echo Creating database structure
mysql -u$DBUSER -p$DBPASS $DBNAME < civicrm.mysql

echo; echo Populating database with example data - civicrm_generated.mysql
mysql -u$DBUSER -p$DBPASS $DBNAME < civicrm_generated.mysql

cd $ORIGPWD

echo; echo Populating database with example data - membership_renewal_sample.sql
mysql -u$DBUSER -p$DBPASS $DBNAME < membership_renewal_sample.sql

####################
# Running test suit
####################

# Do you want to run the tests in command prompt ?
# Value: Yes / No
RUNINCOMMAND=""

if [ $RUNINCOMMAND = "Yes" ]; then
    $PHP5PATH/php UnitTests.php
fi 
